_import("calendar");_import("billshare");_import("myext");$(document).ready(function(){$(".aEditSubCategory").click(function(){var a=$(this).attr("subCId");$("#spnEditSubCategoryName_"+a).show();$("#spnViewSubCategoryName_"+a).hide();return false});$(".iptCancelSubCategory").click(function(){var a=$(this).attr("subCId");$("#spnEditSubCategoryName_"+a).hide();$("#spnViewSubCategoryName_"+a).show();$("#iptSubCategoryName_"+a).val($("#spnViewSubCategoryName_"+a).text());return false});$(".iptSaveSubCategory").click(function(){var a=$(this).attr("subCId");if(!$("#iptSubCategoryName_"+a).val()){showMessage("必须输入收支项目名称!");return false}else{$.ajax({url:"/mybill/category.do?method=addOrUpdate&sid="+window.session.sid,data:{id:a,categoryName:$("#iptSubCategoryName_"+a).val(),parentId:$("#hdnId").val(),type:$("#hdnType").val()},success:function(b){showMessage(b.result.message);if(b.result.success=="true"){$("#spnEditSubCategoryName_"+a).hide();$("#spnViewSubCategoryName_"+a).show();$("#spnViewSubCategoryName_"+a).text($("#iptSubCategoryName_"+a).val())}}})}return false});$(".aDelSubCategory").click(function(){var c=$(this).attr("subCId");var a=$(this).attr("sid");var b=confirm("确定要删除该记录么?");if(b){$.ajax({url:"/mybill/category.do?method=del",data:{id:c,sid:a},success:function(d){showMessage(d.result.message);if(d.result.success=="true"){$("#divSubCategory_"+c).remove()}}})}return false});$("#btnSaveCategory").click(function(){if(!$("#txtCategoryName").val()){showMessage("必须要填写收支项目名称!");$("#txtCategoryName").focus();return false}if(($("#txtCategoryName").val()).length>20){$("#txtCategoryName").focus();showMessage("您输入的名称太长，建议名称不超过20个字!");return false}if($("#hdnType").val()!=$("[name=rdotype]:checked").val()){if(!confirm("当前收支项目性质已修改,执行该操作将会同时修改子分类以及对应账单信息的性质,确定继续?")){return false}$("#hdnType").val($("[name=rdotype]:checked").val())}$.ajax({url:"/mybill/category.do?method=addOrUpdate",data:$(".categoryData").input2Json(),success:function(a){showMessage(a.result.message)}})})});